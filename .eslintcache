[{"D:\\Estudos\\testes_codando\\buit-portal\\src\\index.js":"1","D:\\Estudos\\testes_codando\\buit-portal\\src\\pages\\automatization_center.js":"2","D:\\Estudos\\testes_codando\\buit-portal\\src\\pages\\page_builder_creator.js":"3","D:\\Estudos\\testes_codando\\buit-portal\\src\\pages\\Styles\\automatization_center_style.js":"4","D:\\Estudos\\testes_codando\\buit-portal\\src\\pages\\Styles\\page_builder_creator_style.js":"5","D:\\Estudos\\testes_codando\\buit-portal\\src\\pages\\page_builder_editor.js":"6","D:\\Estudos\\testes_codando\\buit-portal\\src\\pages\\Styles\\page_builder_editor_style.js":"7","D:\\Estudos\\testes_codando\\buit-portal\\src\\Router.js":"8","D:\\Estudos\\testes_codando\\buit-portal\\src\\components\\NavHeader\\index.js":"9","D:\\Estudos\\testes_codando\\buit-portal\\src\\components\\NavHeader\\style.js":"10","D:\\Estudos\\testes_codando\\buit-portal\\src\\components\\TextBox\\index.js":"11","D:\\Estudos\\testes_codando\\buit-portal\\src\\components\\TextBox\\style.js":"12","D:\\Estudos\\testes_codando\\buit-portal\\src\\commands\\index.js":"13"},{"size":261,"mtime":1610106042802,"results":"14","hashOfConfig":"15"},{"size":1744,"mtime":1611665259946,"results":"16","hashOfConfig":"15"},{"size":3799,"mtime":1611580331543,"results":"17","hashOfConfig":"15"},{"size":309,"mtime":1611663933005,"results":"18","hashOfConfig":"15"},{"size":1424,"mtime":1611664012517,"results":"19","hashOfConfig":"15"},{"size":5960,"mtime":1611605536202,"results":"20","hashOfConfig":"15"},{"size":735,"mtime":1610736948749,"results":"21","hashOfConfig":"15"},{"size":824,"mtime":1610105993939,"results":"22","hashOfConfig":"15"},{"size":838,"mtime":1611662980372,"results":"23","hashOfConfig":"15"},{"size":806,"mtime":1611663585724,"results":"24","hashOfConfig":"15"},{"size":1696,"mtime":1611665316655,"results":"25","hashOfConfig":"15"},{"size":2554,"mtime":1611669422488,"results":"26","hashOfConfig":"15"},{"size":3202,"mtime":1611599377478,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"15ynkoc",{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"30"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"D:\\Estudos\\testes_codando\\buit-portal\\src\\index.js",[],["56","57"],"D:\\Estudos\\testes_codando\\buit-portal\\src\\pages\\automatization_center.js",[],"D:\\Estudos\\testes_codando\\buit-portal\\src\\pages\\page_builder_creator.js",[],"D:\\Estudos\\testes_codando\\buit-portal\\src\\pages\\Styles\\automatization_center_style.js",[],"D:\\Estudos\\testes_codando\\buit-portal\\src\\pages\\Styles\\page_builder_creator_style.js",[],"D:\\Estudos\\testes_codando\\buit-portal\\src\\pages\\page_builder_editor.js",["58","59","60"],"import { useEffect, useState } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport NavHeader from '../components/NavHeader'\r\nimport TextBox from '../components/TextBox'\r\nimport { Button } from 'wmarks-components'\r\nimport {\r\n  Main,\r\n  TextWrapper,\r\n  ButtonWrapper\r\n} from './Styles/page_builder_editor_style'\r\nimport getCommand from '../commands'\r\nimport { saveAs } from 'file-saver'\r\n\r\nfunction PageBuilderEditor() {\r\n  const location = useLocation()\r\n  const [pageBuilder, setPageBuilder] = useState({\r\n    name: '',\r\n    description: '',\r\n    commands: []\r\n  })\r\n  const [forme, setForme] = useState(false)\r\n  const [text, setText] = useState({})\r\n  const [clicked, setClicked] = useState([])\r\n  const [actualCmd, setActualCmd] = useState()\r\n  const [propierties, setPropierties] = useState([])\r\n  const [save, setSave] = useState(false)\r\n  const [saveAll, setSaveAll] = useState(false)\r\n  const commandText = (cmd) => getCommand(pageBuilder, cmd, propierties)\r\n\r\n  useEffect(() => {\r\n    setPageBuilder({\r\n      ...location.state\r\n    })\r\n  }, [location])\r\n\r\n  useEffect(() => {\r\n    pageBuilder.name && activeButton()\r\n  }, [pageBuilder])\r\n\r\n  useEffect(() => {\r\n    const textarea = document.querySelector('textarea')\r\n    textarea.value = actualCmd\r\n  }, [actualCmd])\r\n\r\n  useEffect(() => {\r\n    const index = clicked.length - 1\r\n    const command = clicked[index]\r\n    if (command) {\r\n      if (\r\n        command.split('.')[1] === 'resource' ||\r\n        command.split('.')[2] === 'action'\r\n      ) {\r\n        setActualCmd(getCommandText(command))\r\n      }\r\n    }\r\n  }, [propierties, clicked])\r\n\r\n  useEffect(() => {\r\n    const index = clicked.length - 1\r\n    const command = clicked[index]\r\n    if (command && save) {\r\n      saveFiler(text[command], command)\r\n    }\r\n    setSave(false)\r\n  }, [text, save, clicked])\r\n\r\n  useEffect(() => {\r\n    if (saveAll) {\r\n      pageBuilder.commands.map((cmd) => {\r\n        if (text[cmd]) {\r\n          saveFiler(text[cmd], cmd)\r\n        } else {\r\n          saveFiler(getCommandText(cmd), cmd)\r\n        }\r\n      })\r\n    }\r\n    setSaveAll(false)\r\n  }, [text, saveAll, pageBuilder])\r\n\r\n  function saveFiler(text, cmd) {\r\n    let blob = new Blob([text], {\r\n      type: 'text/plain;charset=utf-8'\r\n    })\r\n\r\n    saveAs(blob, cmd.replace(/[.]\\w*[.]/g, '.'))\r\n  }\r\n\r\n  function activeButton() {\r\n    const button = document.getElementsByName('edit')\r\n    button.forEach((b) => {\r\n      if (b.getAttribute('data-cmd').split('.')[1] === 'resource') {\r\n        return b.click()\r\n      }\r\n    })\r\n  }\r\n\r\n  function isForm(command) {\r\n    if (command.split('.')[1] === 'resource') {\r\n      setForme(true)\r\n    } else {\r\n      setForme(false)\r\n    }\r\n  }\r\n\r\n  function isButtonActive(button, event) {\r\n    button.forEach((b) => b.classList.remove('active'))\r\n    event.target.classList.add('active')\r\n  }\r\n\r\n  function handleText(commandActive, command, textarea) {\r\n    if (commandActive !== command) {\r\n      setClicked([...clicked, command])\r\n      setText({ ...text, [commandActive]: textarea.value })\r\n    } else {\r\n      setClicked([...clicked, command])\r\n    }\r\n  }\r\n\r\n  function getCommandText(command) {\r\n    if (\r\n      command.split('.')[1] === 'resource' ||\r\n      command.split('.')[1] === 'mcmd'\r\n    ) {\r\n      return commandText(command)[command.split('.')[1]].replace(\r\n        new RegExp(['>,'], 'g'),\r\n        '>'\r\n      )\r\n    } else {\r\n      return commandText(command)[\r\n        command.split('.')[1] + '_' + command.split('.')[2]\r\n      ].replace(new RegExp(['>,'], 'g'), '>')\r\n    }\r\n  }\r\n\r\n  function handleClick(event) {\r\n    const button = document.getElementsByName('edit')\r\n    const command = event.target.dataset.cmd\r\n    const index = clicked.length - 1\r\n    const commandActive = clicked[index]\r\n    const textarea = document.querySelector('textarea')\r\n\r\n    isButtonActive(button, event)\r\n    isForm(command)\r\n    handleText(commandActive, command, textarea)\r\n    text[command]\r\n      ? setActualCmd(text[command])\r\n      : setActualCmd(getCommandText(command))\r\n  }\r\n\r\n  function handleIncludeClick() {\r\n    const name = document.querySelectorAll('input')[0]\r\n    const description = document.querySelectorAll('input')[1]\r\n    const pk = document.querySelectorAll('select')[0]\r\n    const type = document.querySelectorAll('select')[1]\r\n\r\n    setPropierties([\r\n      ...propierties,\r\n      {\r\n        name: name.value,\r\n        description: description.value,\r\n        pk: pk.value,\r\n        type: type.value\r\n      }\r\n    ])\r\n\r\n    name.value = null\r\n    description.value = null\r\n\r\n    name.focus()\r\n  }\r\n\r\n  function saveActualTextArea() {\r\n    const index = clicked.length - 1\r\n    const command = clicked[index]\r\n    const textarea = document.querySelector('textarea')\r\n\r\n    setText({ ...text, [command]: textarea.value })\r\n  }\r\n\r\n  function handleSave() {\r\n    saveActualTextArea()\r\n    setSave(true)\r\n  }\r\n\r\n  function handleSaveAll() {\r\n    saveActualTextArea()\r\n    setSaveAll(true)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <NavHeader>Page Builder Editor</NavHeader>\r\n      <Main backgroundColor=\"colorBlackFourth\" borderColor=\"colorFirst\">\r\n        <TextWrapper>\r\n          <TextBox\r\n            form={forme}\r\n            value={actualCmd}\r\n            readOnly={forme}\r\n            includeOnClinck={handleIncludeClick}\r\n            saveOnClick={handleSave}\r\n            savAllOnClick={handleSaveAll}\r\n          />\r\n        </TextWrapper>\r\n        <ButtonWrapper>\r\n          {pageBuilder &&\r\n            pageBuilder.commands.map((cmd) => (\r\n              <Button\r\n                small\r\n                shadowColor=\"colorSecond\"\r\n                color=\"colorBlackFirst\"\r\n                key={cmd}\r\n                name=\"edit\"\r\n                data-cmd={cmd}\r\n                onClick={handleClick}\r\n              >\r\n                {cmd}\r\n              </Button>\r\n            ))}\r\n        </ButtonWrapper>\r\n      </Main>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PageBuilderEditor\r\n","D:\\Estudos\\testes_codando\\buit-portal\\src\\pages\\Styles\\page_builder_editor_style.js",[],"D:\\Estudos\\testes_codando\\buit-portal\\src\\Router.js",[],"D:\\Estudos\\testes_codando\\buit-portal\\src\\components\\NavHeader\\index.js",[],"D:\\Estudos\\testes_codando\\buit-portal\\src\\components\\NavHeader\\style.js",[],"D:\\Estudos\\testes_codando\\buit-portal\\src\\components\\TextBox\\index.js",[],"D:\\Estudos\\testes_codando\\buit-portal\\src\\components\\TextBox\\style.js",[],"D:\\Estudos\\testes_codando\\buit-portal\\src\\commands\\index.js",[],{"ruleId":"61","replacedBy":"62"},{"ruleId":"63","replacedBy":"64"},{"ruleId":"65","severity":1,"message":"66","line":56,"column":6,"nodeType":"67","endLine":56,"endColumn":28,"suggestions":"68"},{"ruleId":"69","severity":1,"message":"70","line":69,"column":38,"nodeType":"71","messageId":"72","endLine":69,"endColumn":40},{"ruleId":"65","severity":1,"message":"66","line":78,"column":6,"nodeType":"67","endLine":78,"endColumn":34,"suggestions":"73"},"no-native-reassign",["74"],"no-negated-in-lhs",["75"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getCommandText'. Either include it or remove the dependency array.","ArrayExpression",["76"],"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside",["77"],"no-global-assign","no-unsafe-negation",{"desc":"78","fix":"79"},{"desc":"80","fix":"81"},"Update the dependencies array to be: [propierties, clicked, getCommandText]",{"range":"82","text":"83"},"Update the dependencies array to be: [text, saveAll, pageBuilder, getCommandText]",{"range":"84","text":"85"},[1595,1617],"[propierties, clicked, getCommandText]",[2112,2140],"[text, saveAll, pageBuilder, getCommandText]"]